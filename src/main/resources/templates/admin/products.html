<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{base::layout(~{::section})}">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>All Products - Admin Dashboard</title>
<style>
/*
 * Enhanced CSS for a Modern, Good-Looking Admin Dashboard
 * Focus: Soft colors, subtle gradients, and clean interactions.
 */

:root {
    --primary-color: #6a67ce; /* A more refined purple/blue */
    --secondary-color: #8b5cf6; /* Complementary lighter purple */
    --text-color: #333;
    --light-bg: #f7f9fc;
    --shadow-light: 0 4px 15px rgba(0, 0, 0, 0.05);
    --shadow-medium: 0 10px 30px rgba(106, 103, 206, 0.2);
}

body {
    background-color: var(--light-bg);
}

/* -----------------------------------
   Header and Cards
----------------------------------- */
.products-header {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    color: white;
    padding: 2.5rem; /* Increased padding */
    border-radius: 20px; /* Softer edges */
    margin-bottom: 2.5rem;
    box-shadow: 0 15px 40px rgba(106, 103, 206, 0.4); /* Stronger, softer shadow */
}

.search-card, .table-container {
    background: white;
    padding: 2rem;
    border-radius: 18px;
    box-shadow: var(--shadow-light);
    margin-bottom: 2rem;
}

/* -----------------------------------
   Table Styles
----------------------------------- */
.table-container {
    overflow-x: auto;
}

.table {
    --bs-table-bg: white; /* Ensure white background for table */
    border-radius: 15px; /* Match container border */
}

.table thead {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); /* Lighter, more vibrant header gradient */
    color: white;
    border-radius: 15px 15px 0 0; /* Only top corners rounded */
}

.table thead th {
    border: none;
    padding: 1.2rem 1rem; /* More vertical padding */
    font-weight: 700;
    text-transform: uppercase;
    font-size: 0.75rem; /* Slightly smaller for cleaner look */
    letter-spacing: 1px;
}

.table tbody tr {
    transition: all 0.3s ease;
    border-bottom: 1px solid #eee; /* Light separator line */
}

.table tbody tr:last-child {
    border-bottom: none;
}

.table tbody tr:hover {
    background-color: #f0f2ff;
    transform: translateY(-2px); /* Subtle lift on hover */
    box-shadow: 0 6px 15px rgba(106, 103, 206, 0.1);
}

/* -----------------------------------
   Product Details
----------------------------------- */
.product-img {
    width: 60px; /* Slightly smaller for better table fit */
    height: 60px;
    object-fit: cover;
    border-radius: 50%; /* Circle image for a modern look */
    border: 3px solid var(--primary-color);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    transition: transform 0.4s ease, border-color 0.3s ease;
}

.product-img:hover {
    transform: scale(1.1); /* Slightly less dramatic zoom */
    border-color: var(--secondary-color);
}

.price-tag {
    font-weight: 700;
    color: #06b6d4; /* Tailwind's cyan-500 for a fresh look */
}

.discount-tag {
    color: #ef4444; /* Tailwind's red-500 */
    font-weight: 600;
}

/* -----------------------------------
   Badges and Status
----------------------------------- */
.badge-status {
    padding: 0.4rem 0.8rem;
    border-radius: 12px;
    font-weight: 700;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.badge-active {
    background: linear-gradient(45deg, #10b981 0%, #34d399 100%); /* Green-teal */
    color: white;
}

.badge-inactive {
    background: linear-gradient(45deg, #f97316 0%, #fb923c 100%); /* Orange-red */
    color: white;
}

.badge.bg-secondary {
    background-color: var(--primary-color) !important;
    border-radius: 8px;
    font-weight: 500;
}

/* -----------------------------------
   Search & Input
----------------------------------- */
.search-input {
    border: 1px solid #ddd; /* Softer border */
    border-radius: 12px;
    padding: 0.8rem 1.2rem;
    transition: all 0.3s ease;
    height: 100%; /* Full height for alignment */
}

.search-input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 0.25rem rgba(106, 103, 206, 0.2);
    outline: none;
}

.btn-search {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    border: none;
    border-radius: 12px;
    padding: 0.8rem 1.5rem;
    color: white;
    font-weight: 600;
    transition: all 0.3s ease;
}

.btn-search:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(106, 103, 206, 0.4);
}

/* -----------------------------------
   Action Buttons
----------------------------------- */
.btn-action {
    margin: 0.2rem;
    padding: 0.6rem 1.2rem;
    border-radius: 10px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    transition: all 0.3s ease;
    border: none;
}

.btn-edit {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); /* Cleaner blue */
    color: white;
}

.btn-edit:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(59, 130, 246, 0.4);
}

.btn-delete {
    background: linear-gradient(135deg, #f43f5e 0%, #e11d48 100%); /* Cleaner red */
    color: white;
}

.btn-delete:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(244, 63, 94, 0.4);
}

/* -----------------------------------
   Utility and Info
----------------------------------- */
.back-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--primary-color);
    font-weight: 700;
    text-decoration: none;
    transition: all 0.3s ease;
    padding: 0.75rem 1.25rem;
    border-radius: 12px;
}

.back-link:hover {
    background: #e9e7ff;
    color: var(--secondary-color);
    transform: translateX(-5px);
}

.stats-info {
    background: linear-gradient(135deg, #10b981 0%, #34d399 100%); /* Matching Active badge color */
    color: white;
    padding: 1.2rem 1.75rem;
    border-radius: 15px;
    font-weight: 700;
    font-size: 1.05rem;
    display: inline-block;
    box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
}

/* -----------------------------------
   Alerts and Pagination
----------------------------------- */
.alert-custom {
    border-radius: 15px;
    padding: 1.2rem 2rem;
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 2rem;
    box-shadow: var(--shadow-medium);
    border: none;
	animation: slideIn 0.5s ease;
}

@keyframes slideIn {
	from {
		opacity: 0;
		transform: translateY(-20px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.alert-success-custom {
    background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
    color: white;
}

.alert-danger-custom {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
}

.pagination {
    gap: 0.2rem;
}

.page-item .page-link {
    border: none;
    border-radius: 10px;
    color: var(--primary-color);
    font-weight: 700;
    padding: 0.75rem 1.1rem;
    transition: all 0.3s ease;
    margin: 0 0.1rem;
}

.page-item.active .page-link {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    color: white;
    box-shadow: 0 4px 10px rgba(106, 103, 206, 0.3);
}

.page-item .page-link:hover {
    background: #e9e7ff;
    color: var(--secondary-color);
    transform: translateY(-2px);
}
</style>
</head>
<body>
	<section>
		<div class="container-fluid mt-4 p-3">
			<div class="row">
				<div class="products-header">
					<h1 class="mb-2">ðŸ“¦ Product Management</h1>
					<p class="mb-0 opacity-75">Manage your entire product inventory from one place</p>
				</div>
				
				<div class="mb-3">
					<a href="/admin/" class="back-link">
						<i class="fa-solid fa-arrow-left"></i> Back to Dashboard
					</a>
				</div>
				
				<th:block th:if="${session.succMsg}">
					<div class="alert alert-success-custom alert-custom">
						<i class="fa-solid fa-circle-check"></i> [[${session.succMsg}]]
					</div>
					<th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
				</th:block>

				<th:block th:if="${session.errorMsg}">
					<div class="alert alert-danger-custom alert-custom">
						<i class="fa-solid fa-circle-exclamation"></i> [[${session.errorMsg}]]
					</div>
					<th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
				</th:block>

				<div class="col-md-12">
					<div class="search-card">
						<form action="/admin/products" method="get">
							<div class="row align-items-center">
								<div class="col-md-8">
									<input type="text" class="form-control search-input" 
										   name="ch" 
										   placeholder="ðŸ” Search by product title or category...">
								</div>
								<div class="col-md-4">
									<button class="btn btn-search w-100" type="submit">
										<i class="fa-solid fa-magnifying-glass"></i> Search Products
									</button>
								</div>
							</div>
						</form>
					</div>
				</div>

				<div class="col-md-12">
					<div class="table-container">
						<table class="table table-hover">
							<thead>
								<tr>
									<th scope="col">#</th>
									<th scope="col">Image</th>
									<th scope="col">Title</th>
									<th scope="col">Category</th>
									<th scope="col">Price</th>
									<th scope="col">Discount</th>
									<th scope="col">Final Price</th>
									<th scope="col">Status</th>
									<th scope="col">Stock</th>
									<th scope="col">Actions</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="p,c:${products}">
									<th scope="row">[[${c.count}]]</th>
									<td>
										<img th:src="@{'/img/product_img/'+${p.image}}"
											 class="product-img"
											 alt="Product Image">
									</td>
									<td><strong>[[${p.title}]]</strong></td>
									<td><span class="badge bg-secondary">[[${p.category}]]</span></td>
									<td class="price-tag">â‚¹[[${p.price}]]</td>
									<td class="discount-tag">[[${p.discount}]]%</td>
									<td class="price-tag">â‚¹[[${p.discountPrice}]]</td>
									<td>
										<span th:class="${p.isActive} ? 'badge-status badge-active' : 'badge-status badge-inactive'"
											  th:text="${p.isActive} ? 'âœ“ Active' : 'âœ— Inactive'">
										</span>
									</td>
									<td><strong>[[${p.stock}]]</strong></td>
									<td>
										<a th:href="@{'/admin/editProduct/'+${p.id}}"
										   class="btn btn-action btn-edit">
											<i class="fa-solid fa-pen-to-square"></i> Edit
										</a>
										<a th:href="@{'/admin/deleteProduct/'+${p.id}}"
										   class="btn btn-action btn-delete"
										   onclick="return confirm('Are you sure you want to delete this product?');">
											<i class="fa-solid fa-trash"></i> Delete
										</a>
									</td>
								</tr>
							</tbody>
						</table>

						<div class="row mt-4">
							<div class="col-md-4">
								<div class="stats-info">
									<i class="fa-solid fa-box"></i> Total Products: [[${totalElements}]]
								</div>
							</div>
							<div class="col-md-8">
								<nav aria-label="Page navigation">
									<ul class="pagination justify-content-end">
										<li class="page-item" th:classappend="${isFirst} ? 'disabled':''">
											<a class="page-link"
											   th:href="@{'/admin/products?pageNo='+${pageNo-1}}"
											   aria-label="Previous">
												<span aria-hidden="true">Â«</span>
											</a>
										</li>

										<li th:each="i:${#numbers.sequence(1,totalPages)}"
											class="page-item" 
											th:classappend="${pageNo+1==i}?'active':''">
											<a class="page-link"
											   th:href="@{'/admin/products?pageNo='+${i-1}}">[[${i}]]</a>
										</li>

										<li class="page-item" th:classappend="${isLast} ? 'disabled':''">
											<a class="page-link"
											   th:href="@{'/admin/products?pageNo='+${pageNo+1}}"
											   aria-label="Next">
												<span aria-hidden="true">Â»</span>
											</a>
										</li>
									</ul>
								</nav>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
</body>
</html>
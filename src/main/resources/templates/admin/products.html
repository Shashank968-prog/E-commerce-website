<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{base::layout(~{::section})}">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>All Products - Admin Dashboard</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
	<section>
		<style>
		:root {
		    --primary-color: #6366f1;
		    --secondary-color: #8b5cf6;
		    --success-color: #10b981;
		    --danger-color: #ef4444;
		    --warning-color: #f59e0b;
		    --info-color: #06b6d4;
		    --text-dark: #1e293b;
		    --text-light: #64748b;
		    --bg-light: #f8fafc;
		    --border-color: #e2e8f0;
		}
		
		body {
		    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		    min-height: 100vh;
		    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
		}
		
		.container-fluid {
		    max-width: 1400px;
		}
		
		.products-header {
		    background: white;
		    padding: 2rem;
		    border-radius: 16px;
		    margin-bottom: 1.5rem;
		    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
		    position: relative;
		    overflow: hidden;
		}
		
		.products-header::before {
		    content: '';
		    position: absolute;
		    top: 0;
		    left: 0;
		    right: 0;
		    height: 4px;
		    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
		}
		
		.products-header h1 {
		    font-size: 2rem;
		    font-weight: 700;
		    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
		    -webkit-background-clip: text;
		    -webkit-text-fill-color: transparent;
		    margin-bottom: 0.5rem;
		}
		
		.products-header p {
		    color: var(--text-light);
		    font-size: 1rem;
		    margin-bottom: 0;
		}
		
		.back-link {
		    display: inline-flex;
		    align-items: center;
		    gap: 0.5rem;
		    background: white;
		    color: var(--primary-color);
		    padding: 0.75rem 1.5rem;
		    border-radius: 10px;
		    text-decoration: none;
		    font-weight: 600;
		    transition: all 0.3s ease;
		    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
		}
		
		.back-link:hover {
		    background: var(--primary-color);
		    color: white;
		    transform: translateY(-2px);
		    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
		}
		
		.alert-custom {
		    padding: 1rem 1.5rem;
		    border-radius: 12px;
		    margin-bottom: 1.5rem;
		    display: flex;
		    align-items: center;
		    gap: 0.75rem;
		    font-weight: 600;
		    animation: slideDown 0.4s ease;
		    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
		}
		
		@keyframes slideDown {
		    from {
		        opacity: 0;
		        transform: translateY(-15px);
		    }
		    to {
		        opacity: 1;
		        transform: translateY(0);
		    }
		}
		
		.alert-success-custom {
		    background: linear-gradient(135deg, var(--success-color), #34d399);
		    color: white;
		}
		
		.alert-danger-custom {
		    background: linear-gradient(135deg, var(--danger-color), #f87171);
		    color: white;
		}
		
		.search-card {
		    background: white;
		    padding: 1.5rem;
		    border-radius: 16px;
		    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
		    margin-bottom: 1.5rem;
		}
		
		.search-input {
		    border: 2px solid var(--border-color);
		    border-radius: 10px;
		    padding: 0.75rem 1rem;
		    transition: all 0.3s ease;
		    font-size: 0.95rem;
		}
		
		.search-input:focus {
		    border-color: var(--primary-color);
		    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
		    outline: none;
		}
		
		.btn-search {
		    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
		    border: none;
		    border-radius: 10px;
		    padding: 0.75rem 1.5rem;
		    color: white;
		    font-weight: 600;
		    transition: all 0.3s ease;
		}
		
		.btn-search:hover {
		    transform: translateY(-2px);
		    box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
		    color: white;
		}
		
		.table-container {
		    background: white;
		    border-radius: 16px;
		    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
		    overflow: hidden;
		}
		
		.table {
		    margin-bottom: 0;
		    width: 100%;
		}
		
		.table thead {
		    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
		    position: sticky;
		    top: 0;
		    z-index: 10;
		}
		
		.table thead th {
		    color: white !important;
		    font-weight: 700 !important;
		    text-transform: uppercase;
		    font-size: 0.85rem !important;
		    letter-spacing: 0.5px;
		    padding: 1.2rem 1rem !important;
		    border: none !important;
		    text-align: center;
		    white-space: nowrap;
		    background: transparent !important;
		}
		
		.table tbody tr {
		    transition: all 0.2s ease;
		    border-bottom: 1px solid var(--border-color);
		}
		
		.table tbody tr:hover {
		    background: linear-gradient(90deg, rgba(99, 102, 241, 0.05), transparent);
		}
		
		.table tbody td,
		.table tbody th {
		    padding: 1rem;
		    vertical-align: middle;
		    border: none;
		    text-align: center;
		}
		
		.product-img {
		    width: 60px;
		    height: 60px;
		    object-fit: cover;
		    border-radius: 12px;
		    border: 2px solid var(--border-color);
		    transition: all 0.3s ease;
		    display: inline-block;
		}
		
		.product-img:hover {
		    transform: scale(1.15);
		    border-color: var(--primary-color);
		    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
		}
		
		.price-tag {
		    font-weight: 700;
		    color: var(--info-color);
		    font-size: 1rem;
		}
		
		.discount-tag {
		    color: var(--danger-color);
		    font-weight: 700;
		}
		
		.badge.bg-secondary {
		    background: linear-gradient(135deg, #a78bfa, #c084fc);
		    padding: 0.4rem 0.8rem;
		    border-radius: 8px;
		    font-weight: 600;
		    font-size: 0.8rem;
		}
		
		.badge-status {
		    padding: 0.5rem 1rem;
		    border-radius: 8px;
		    font-weight: 600;
		    font-size: 0.75rem;
		    text-transform: uppercase;
		    display: inline-flex;
		    align-items: center;
		    gap: 0.4rem;
		}
		
		.badge-active {
		    background: linear-gradient(135deg, var(--success-color), #34d399);
		    color: white;
		}
		
		.badge-inactive {
		    background: linear-gradient(135deg, var(--warning-color), #fbbf24);
		    color: white;
		}
		
		.btn-action {
		    padding: 0.6rem 1rem;
		    border-radius: 8px;
		    font-size: 0.8rem;
		    font-weight: 600;
		    transition: all 0.3s ease;
		    border: none;
		    display: inline-flex;
		    align-items: center;
		    gap: 0.4rem;
		    margin: 0.2rem;
		}
		
		.btn-edit {
		    background: linear-gradient(135deg, #3b82f6, #2563eb);
		    color: white;
		}
		
		.btn-edit:hover {
		    transform: translateY(-2px);
		    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
		    color: white;
		}
		
		.btn-delete {
		    background: linear-gradient(135deg, var(--danger-color), #dc2626);
		    color: white;
		}
		
		.btn-delete:hover {
		    transform: translateY(-2px);
		    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
		    color: white;
		}
		
		.table-footer {
		    padding: 1.5rem;
		    background: var(--bg-light);
		    border-top: 1px solid var(--border-color);
		}
		
		.stats-info {
		    background: linear-gradient(135deg, var(--success-color), #34d399);
		    color: white;
		    padding: 0.9rem 1.5rem;
		    border-radius: 10px;
		    font-weight: 600;
		    font-size: 1rem;
		    display: inline-flex;
		    align-items: center;
		    gap: 0.6rem;
		    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
		}
		
		.pagination {
		    gap: 0.3rem;
		    margin-bottom: 0;
		}
		
		.page-item .page-link {
		    border: 2px solid var(--border-color);
		    border-radius: 8px;
		    color: var(--primary-color);
		    font-weight: 600;
		    padding: 0.6rem 1rem;
		    transition: all 0.3s ease;
		    margin: 0 0.1rem;
		}
		
		.page-item .page-link:hover {
		    background: var(--bg-light);
		    border-color: var(--primary-color);
		    transform: translateY(-1px);
		}
		
		.page-item.active .page-link {
		    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
		    color: white;
		    border-color: transparent;
		    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
		}
		
		.page-item.disabled .page-link {
		    opacity: 0.5;
		    cursor: not-allowed;
		}
		
		.table-responsive {
		    overflow-x: auto;
		}
		
		@media (max-width: 768px) {
		    .products-header h1 {
		        font-size: 1.5rem;
		    }
		    
		    .btn-action {
		        width: 100%;
		        justify-content: center;
		        margin: 0.2rem 0;
		    }
		    
		    .table-footer {
		        flex-direction: column;
		        gap: 1rem;
		    }
		    
		    .pagination {
		        justify-content: center;
		    }
		}
		</style>
	
		<div class="container-fluid mt-4 p-3">
			<div class="row">
				<div class="products-header">
					<h1 class="mb-2">📦 Product Management</h1>
					<p class="mb-0">Manage your entire product inventory from one place</p>
				</div>
				
				<div class="mb-3">
					<a href="/admin/" class="back-link">
						<i class="fa-solid fa-arrow-left"></i> Back to Dashboard
					</a>
				</div>
				
				<th:block th:if="${session.succMsg}">
					<div class="alert alert-success-custom alert-custom">
						<i class="fa-solid fa-circle-check"></i> <span th:text="${session.succMsg}"></span>
					</div>
				</th:block>

				<th:block th:if="${session.errorMsg}">
					<div class="alert alert-danger-custom alert-custom">
						<i class="fa-solid fa-circle-exclamation"></i> <span th:text="${session.errorMsg}"></span>
					</div>
				</th:block>

				<div class="col-md-12">
					<div class="search-card">
						<form action="/admin/products" method="get">
							<div class="row align-items-center">
								<div class="col-md-8">
									<input type="text" class="form-control search-input" 
										   name="ch" 
										   placeholder="🔍 Search by product title or category...">
								</div>
								<div class="col-md-4">
									<button class="btn btn-search w-100" type="submit">
										<i class="fa-solid fa-magnifying-glass"></i> Search Products
									</button>
								</div>
							</div>
						</form>
					</div>
				</div>

				<div class="col-md-12">
					<div class="table-container">
						<div class="table-responsive">
							<table class="table table-hover">
								<thead>
									<tr>
										<th scope="col">SL No</th>
										<th scope="col">Image</th>
										<th scope="col">Product Title</th>
										<th scope="col">Category</th>
										<th scope="col">Original Price</th>
										<th scope="col">Discount %</th>
										<th scope="col">Discount Price</th>
										<th scope="col">Status</th>
										<th scope="col">Stock</th>
										<th scope="col">Actions</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="p,c:${products}">
										<th scope="row" th:text="${c.count}"></th>
										<td>
											<img th:src="@{'/img/product_img/'+${p.image}}"
												 class="product-img"
												 alt="Product Image">
										</td>
										<td><strong th:text="${p.title}"></strong></td>
										<td><span class="badge bg-secondary" th:text="${p.category}"></span></td>
										<td class="price-tag">₹<span th:text="${p.price}"></span></td>
										<td class="discount-tag"><span th:text="${p.discount}"></span>%</td>
										<td class="price-tag">₹<span th:text="${p.discountPrice}"></span></td>
										<td>
											<span th:class="${p.isActive} ? 'badge-status badge-active' : 'badge-status badge-inactive'"
												  th:text="${p.isActive} ? '✓ Active' : '✗ Inactive'">
											</span>
										</td>
										<td><strong th:text="${p.stock}"></strong></td>
										<td>
											<a th:href="@{'/admin/editProduct/'+${p.id}}"
											   class="btn btn-action btn-edit">
												<i class="fa-solid fa-pen-to-square"></i> Edit
											</a>
											<a th:href="@{'/admin/deleteProduct/'+${p.id}}"
											   class="btn btn-action btn-delete"
											   onclick="return confirm('Are you sure you want to delete this product?');">
												<i class="fa-solid fa-trash"></i> Delete
											</a>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div class="row mt-0 table-footer">
							<div class="col-md-4">
								<div class="stats-info">
									<i class="fa-solid fa-box"></i> Total Products: <span th:text="${totalElements}"></span>
								</div>
							</div>
							<div class="col-md-8">
								<nav aria-label="Page navigation">
									<ul class="pagination justify-content-end">
										<li class="page-item" th:classappend="${isFirst} ? 'disabled':''">
											<a class="page-link"
											   th:href="@{'/admin/products?pageNo='+${pageNo-1}}"
											   aria-label="Previous">
												<span aria-hidden="true">«</span>
											</a>
										</li>

										<li th:each="i:${#numbers.sequence(1,totalPages)}"
											class="page-item" 
											th:classappend="${pageNo+1==i}?'active':''">
											<a class="page-link"
											   th:href="@{'/admin/products?pageNo='+${i-1}}" th:text="${i}"></a>
										</li>

										<li class="page-item" th:classappend="${isLast} ? 'disabled':''">
											<a class="page-link"
											   th:href="@{'/admin/products?pageNo='+${pageNo+1}}"
											   aria-label="Next">
												<span aria-hidden="true">»</span>
											</a>
										</li>
									</ul>
								</nav>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
</body>
</html>